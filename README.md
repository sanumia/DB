МДиСУБД 
Суши-ресторан
Городецкая Диана Анатольевна 353501
Функциональные требования

Общая функциональность сайта суши-ресторана
Интернет-сайт суши-ресторана представляет собой многофункциональную платформу, предназначенную для полного цикла взаимодействия с клиентом — от выбора блюд до получения заказа. Клиент может совершать весь процесс заказа в несколько интуитивных шагов: знакомиться с подробным меню, где каждое блюдо сопровождается описанием, составом, весом и фотографией; формировать собственную корзину, регулируя количество позиций; выбирать удобный способ оплаты (онлайн или наличными курьеру) и точное время доставки. Система автоматически рассчитывает итоговую сумму, применяя акционные предложения и учитывая стоимость доставки.

После оформления пользователь получает возможность в реальном времени отслеживать статус своего заказа — от принятия и приготовления на кухне до момента, когда курьер выезжает по указанному адресу. Для постоянных гостей реализована система личных кабинетов, где хранится история всех заказов, что позволяет быстро повторять любимые позиции, и накапливаются бонусы по программе лояльности. Таким образом, сайт не просто является каталогом еды с функцией онлайн-оплаты, а представляет собой комплексный сервис, обеспечивающий удобный, прозрачный и персонализированный опыт заказа еды с доставкой.

1) Авторизацию и аутентификацию пользователей. Для входа в систему пользователь обязан ввести логин и пароль. Пароль хранится в зашифрованном виде, что гарантирует безопасность данных. При регистрации необходимо проверять уникальность логина (например, email). Также должна быть возможность восстановления пароля через подтверждение по электронной почте или телефону. Разные роли пользователей должны иметь доступ только к соответствующему функционалу.

2) Управление пользователями по принципу CRUD (создание, чтение, обновление и удаление). Пользователь может зарегистрироваться в системе, а администратор может добавлять сотрудников. Должна быть возможность просматривать список пользователей, редактировать их данные (например, имя, телефон или адрес доставки), а также удалять или деактивировать учетные записи.
Необходима реализация системы ролей. В системе должны существовать как минимум следующие роли: клиент, администратор, повар и курьер. Клиент имеет возможность просматривать меню, оформлять заказы и отслеживать доставку. Администратор управляет пользователями, меню, заказами и ингредиентами. Повар получает доступ к назначенным заказам и может изменять их статус. Курьер имеет доступ к заказам для доставки и может отмечать изменение их состояния.

3) Журналирование действий пользователей. В журнале фиксируются все значимые события: авторизация, выход, создание и изменение заказов, обновление профиля, редактирование меню. Для каждой записи в журнале сохраняются дата и время события, идентификатор пользователя и описание действия. Журнал доступен для просмотра только администраторам и должен храниться в течение длительного периода (не менее одного года).

4) Управление меню, заказами, доставкой и оплатой. Также должна быть реализована работа с ингредиентами и учет складских остатков. Для сотрудников необходимо учитывать график смен. Эти функции обеспечивают комплексное управление рестораном и позволяют автоматизировать ключевые бизнес-процессы.
Конечно, вот подробное пояснение к каждой таблице базы данных.

### **1. Таблица `clients` (Клиенты)**
**Назначение таблицы:** Хранение данных о клиентах ресторана для управления заказами и программой лояльности.

**Назначение полей:**
*   `client_id` — Уникальный идентификатор клиента (первичный ключ)
*   `name` — ФИО или имя клиента для обращения
*   `phone` — Контактный телефон для подтверждения заказа и связи
*   `address` — Стандартный адрес доставки для ускорения оформления заказа
*   `created_at` — Дата и время регистрации клиента в системе для анализа базы

---

### **2. Таблица `positions` (Должности)**
**Назначение таблицы:** Справочник должностей для стандартизации наименований и избежания дублирования.

**Назначение полей:**
*   `position_id` — Уникальный идентификатор должности (первичный ключ)
*   `title` — Наименование должности (например, «Су-шеф», «Курьер»)

---

### **3. Таблица `employees` (Сотрудники)**
**Назначение таблицы:** Учет персонала ресторана: поваров, курьеров, администраторов.

**Назначение полей:**
*   `employee_id` — Уникальный идентификатор сотрудника (первичный ключ)
*   `position_id` — Ссылка на должность из справочника (внешний ключ)
*   `first_name` — Имя сотрудника
*   `last_name` — Фамилия сотрудника
*   `phone` — Контактный телефон для служебной связи
*   `hire_date` — Дата приема на работу для расчета стажа
*   `salary` — Размер оклада или ставки сотрудника

---

### **4. Таблица `order_statuses` (Статусы заказов)**
**Назначение таблицы:** Справочник всех возможных состояний заказа в его жизненном цикле.

**Назначение полей:**
*   `status_id` — Уникальный идентификатор статуса (первичный ключ)
*   `name` — Название статуса (например, «Принят», «Доставлен»)

---

### **5. Таблица `payments` (Способы оплаты)**
**Назначение таблицы:** Справочник доступных в ресторане способов оплаты.

**Назначение полей:**
*   `payment_id` — Уникальный идентификатор способа оплаты (первичный ключ)
*   `method_name` — Название способа оплаты (например, «Картой онлайн»)

---

### **6. Таблица `orders` (Заказы)**
**Назначение таблицы:** Центральная таблица системы, хранит сводную информацию по каждому заказу.

**Назначение полей:**
*   `order_id` — Уникальный номер заказа (первичный ключ)
*   `client_id` — Ссылка на клиента, оформившего заказ (внешний ключ)
*   `status_id` — Текущий статус заказа (внешний ключ)
*   `payment_id` — Выбранный способ оплаты (внешний ключ)
*   `total_amount` — Итоговая сумма к оплате по заказу
*   `created_at` — Дата и время создания заказа

---

### **7. Таблица `deliveries` (Доставки)**
**Назначение таблицы:** Управление процессом доставки: закрепление курьеров, отслеживание времени.

**Назначение полей:**
*   `delivery_id` — Уникальный идентификатор доставки (первичный ключ)
*   `order_id` — Ссылка на заказ, который доставляется (внешний ключ)
*   `employee_id` — Ссылка на курьера, назначенного на доставку (внешний ключ)
*   `address` — Адрес доставки (может отличаться от стандартного адреса клиента)
*   `departed_at` — Время выезда курьера из ресторана
*   `delivered_at` — Время фактической доставки заказа клиенту

---

### **8. Таблица `categories` (Категории блюд)**
**Назначение таблицы:** Группировка блюд меню по разделам для удобной навигации.

**Назначение полей:**
*   `category_id` — Уникальный идентификатор категории (первичный ключ)
*   `name` — Название категории (например, «Роллы», «Суши»)
*   `description` — Описание категории для меню

---

### **9. Таблица `dishes` (Блюда)**
**Назначение таблицы:** Хранение меню ресторана с полным описанием, ценой и наличием.

**Назначение полей:**
*   `dish_id` — Уникальный идентификатор блюда (первичный ключ)
*   `category_id` — Категория, к которой относится блюдо (внешний ключ)
*   `name` — Название блюда в меню
*   `description` — Состав и описание блюда для клиента
*   `weight_grams` — Вес порции в граммах
*   `price` — Цена для клиента
*   `is_available` — Флаг, доступно ли блюдо к заказу в данный момент

---

### **10. Таблица `ingredients` (Ингредиенты)**
**Назначение таблицы:** Складской учет. Контроль остатков и цен ингредиентов.

**Назначение полей:**
*   `ingredient_id` — Уникальный идентификатор ингредиента (первичный ключ)
*   `name` — Название ингредиента (например, «Лосось», «Рис»)
*   `unit_of_measure` — Единица измерения (шт, гр, мл)
*   `current_price` — Текущая закупочная цена
*   `quantity_in_stock` — Количество на остатке

---

### **11. Таблица `order_items` (Позиции заказа)**
**Назначение таблицы:** Детализация состава заказа. Связывает заказы и блюда, хранит исторические цены.

**Назначение полей:**
*   `order_item_id` — Уникальный идентификатор позиции (первичный ключ)
*   `order_id` — Ссылка на заказ (внешний ключ)
*   `dish_id` — Ссылка на блюдо из меню (внешний ключ)
*   `quantity` — Количество порций данного блюда в заказе
*   `price_at_time_of_order` — Цена блюда на момент оформления заказа (фиксация истории)

---

### **11. Таблица `discounts` (Скидки)**

discount_id - уникальный идентификатор скидки

name - название акции/скидки

description - описание условий акции

discount_type - тип скидки (процент/фиксированная сумма)

discount_value - значение скидки

min_order_amount - минимальная сумма заказа для применения

start_date и end_date - период действия акции

is_active - активна ли акция в данный момент

promo_code - промокод (если требуется)

В таблицу orders добавлены поля:

discount_id - ссылка на примененную скидку

final_amount - итоговая сумма после применения скидок

1. Связи "Один ко многим" (1:М)

positions → employees (Одна должность может быть у многих сотрудников)

order_statuses → orders (Один статус может быть у многих заказов)

payments → orders (Один способ оплаты может использоваться в многих заказах)

categories → dishes (В одной категории может быть много блюд) 

clients → orders (Один клиент может сделать много заказов)

employees → deliveries (Один курьер может выполнить много доставок)

2. Связи "Многие ко многим" (М:М) через таблицы-связки

a) Заказы ↔ Блюда (через order_items)

b) Блюда ↔ Ингредиенты (через dish_ingredients)

3. Связь "Один к одному" (1:1)
orders ↔ deliveries (Каждому заказу соответствует ровно одна попытка доставки)
