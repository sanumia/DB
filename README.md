МДиСУБД 
Суши-ресторан
Городецкая Диана Анатольевна 353501
Функциональные требования

Система должна обеспечивать авторизацию и аутентификацию пользователей. Для входа в систему пользователь обязан ввести логин и пароль. Пароль хранится в зашифрованном виде, что гарантирует безопасность данных. При регистрации необходимо проверять уникальность логина (например, email). Также должна быть возможность восстановления пароля через подтверждение по электронной почте или телефону. Разные роли пользователей должны иметь доступ только к соответствующему функционалу.

Система должна поддерживать управление пользователями по принципу CRUD (создание, чтение, обновление и удаление). Пользователь может зарегистрироваться в системе, а администратор может добавлять сотрудников. Должна быть возможность просматривать список пользователей, редактировать их данные (например, имя, телефон или адрес доставки), а также удалять или деактивировать учетные записи.

Необходима реализация системы ролей. В системе должны существовать как минимум следующие роли: клиент, администратор, повар и курьер. Клиент имеет возможность просматривать меню, оформлять заказы и отслеживать доставку. Администратор управляет пользователями, меню, заказами и ингредиентами. Повар получает доступ к назначенным заказам и может изменять их статус. Курьер имеет доступ к заказам для доставки и может отмечать изменение их состояния.

Система должна вести журналирование действий пользователей. В журнале фиксируются все значимые события: авторизация, выход, создание и изменение заказов, обновление профиля, редактирование меню. Для каждой записи в журнале сохраняются дата и время события, идентификатор пользователя и описание действия. Журнал доступен для просмотра только администраторам и должен храниться в течение длительного периода (не менее одного года).

Помимо минимальных обязательных функций система должна обеспечивать управление меню, заказами, доставкой и оплатой. Также должна быть реализована работа с ингредиентами и учет складских остатков. Для сотрудников необходимо учитывать график смен. Эти функции обеспечивают комплексное управление рестораном и позволяют автоматизировать ключевые бизнес-процессы.
Конечно, вот подробное пояснение к каждой таблице базы данных.

### 1. Таблица `clients` (Клиенты)
Эта таблица является основой для управления взаимоотношениями с клиентами. Она хранит уникальные идентификаторы (`client_id`), которые используются для связи с другими таблицами. Для связи с клиентом обязательны его имя (`name`) и уникальный телефонный номер (`phone`). Поле `address` хранит текст адреса для доставки, а `created_at` автоматически фиксирует дату и время регистрации клиента в системе, что полезно для анализа.

### 2. Таблица `positions` (Должности)
Данная таблица является справочником, который обеспечивает целостность данных и устраняет избыточность. Она содержит перечень всех возможных должностей в ресторане (например, «повар», «курьер», «администратор»). Её основная цель — не допустить повторяющегося и противоречивого ввода названий одних и тех же должностей в таблицу `employees`.

### 3. Таблица `employees` (Сотрудники)
Здесь хранится вся информация о персонале ресторана. Каждый сотрудник имеет уникальный идентификатор и ссылается на свою должность из таблицы `positions` через `position_id`. Таблица содержит личные данные (имя, фамилия, телефон), а также информацию о трудоустройстве: дату приема на работу (`hire_date`) и размер заработной платы (`salary`).

### 4. Таблица `order_statuses` (Статусы заказов)
Этот справочник определяет все возможные этапы жизненного цикла заказа. Статусы, такие как «Принят», «Готовится», «В пути», «Доставлен» и «Отменен», стандартизируют процесс обработки заказов. Их вынесение в отдельную таблицу позволяет гибко управлять workflow без изменения структуры базы данных.

### 5. Таблица `payments` (Способы оплаты)
Таблица служит справочником доступных способов оплаты («Наличные курьеру», «Картой онлайн», «QR-код»). Как и другие справочники, она предназначена для обеспечения консистентности данных. Добавление нового метода оплаты требует лишь одной новой записи здесь, а не изменения кода во всей системе.

### 6. Таблица `orders` (Заказы)
Это центральная и ключевая таблица системы, которая агрегирует информацию о каждом заказе. Она связывает клиента (`client_id`), выбранный способ оплаты (`payment_id`) и текущий статус (`status_id`). Поле `total_amount` хранит общую сумму заказа, рассчитанную на основе позиций, а `created_at` фиксирует момент его создания.

### 7. Таблица `deliveries` (Доставки)
Данная таблица содержит информацию, специфичную для процесса доставки. Она связана с конкретным заказом (`order_id`) и курьером (`employee_id`), который его выполняет. Поля `departed_at` и `delivered_at` отслеживают время выезда курьера из ресторана и фактического вручения заказа клиенту, что позволяет анализировать время доставки.

### 8. Таблица `categories` (Категории блюд)
Справочник категорий меню, таких как «Суши», «Роллы», «Сеты» и «Салаты». Он позволяет логически группировать блюда для удобства клиентов и структурирования меню в интерфейсе приложения. Поле `description` может использоваться для дополнительного маркетингового описания категории.

### 9. Таблица `dishes` (Блюда)
Ядро меню ресторана. Для каждого блюда хранится его название, текстовое описание, вес в граммах (`weight_grams`) и цена. Флаг `is_available` позволяет временно скрывать блюдо из меню (например, при отсутствии ингредиентов). Связь с `category_id` определяет, к какой категории принадлежит блюдо.

### 10. Таблица `ingredients` (Ингредиенты)
Данная таблица представляет собой складской учет. В ней хранятся все продукты, используемые для приготовления блюд. Для каждого ингредиента указаны единица измерения (`unit_of_measure` — кг, гр, шт.), текущая закупочная цена (`current_price`) и остаток на складе (`quantity_in_stock`). Эта информация критична для расчета себестоимости и автоматического списания.

### 11. Таблица `order_items` (Позиции заказа)
Эта таблица реализует связь «многие-ко-многим» между заказами и блюдами. Она содержит состав каждого заказа: какие блюда (`dish_id`) и в каком количестве (`quantity`) были заказаны. Ключевая особенность — поле `price_at_time_of_order`, которое сохраняет цену блюда на момент оформления заказа, обеспечивая историческую точность финансовых данных, даже если цена в меню later изменится.

### 12. Таблица `dish_ingredients` (Ингредиенты блюд)
Данная таблица определяет рецептуру каждого блюда. Она связывает блюда с ингредиентами и указывает, какое количество каждого ингредиента (`quantity_required`) необходимо для приготовления одной порции. Эта информация является основой для автоматического расчета себестоимости блюд и формирования списка списания со склада при принятии заказа.
